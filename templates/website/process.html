{% extends "website/_base.html" %}
{% load static %}

{% block css %}
<!--<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />-->
<link rel="stylesheet" href="{% static 'leaflet/dist/leaflet.css' %}">
{% endblock css %}

{% block content %}
<h1>Georeferencing @ SANBI</h1>
<div id="leaflet" style="height: 400px"></div>
<hr>

<!-- Table of data being georeferenced -->
<table class="table table-striped">
  <thead><tr>
    <th>#</th>
    <th>Collected</th>
    <th>Collector</th>
    <th>Place</th>
    <th>&nbsp;</th>
  </tr></thead>
  <tbody>
  {% for row in data %}
    <tr>
      <td>{{ row.brahms }}</td>
      <td>{{ row.collected }}</td>
      <td>{{ row.collector_number }}</td>
      <td>{{ row.locality }}</td>
      <td>
        <button class="btn btn-primary btn-process" data-locations='{{ row.georeference.locality_parts.georeferenced }}'
                {% if row.original_point %}
                data-original-point="{{ row.original_point }}"
                {% endif %}>Process</button>
      </td>
    </tr>
  {% endfor %}

  </tbody>
</table>
{% endblock content %}

{% block js %}
<script src="{% static 'leaflet/dist/leaflet.js' %}"></script>
<script src="{% static 'georeference.js' %}"></script>
{% endblock js %}
